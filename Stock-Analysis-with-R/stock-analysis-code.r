

> # STEP A: Visit the README.md File.

> # STEP B: Loading the Technical Trading Rules (TTR)library
> library("TTR")
package ‘TTR’ was built under R version 3.3.3 

> # Importing the input data file for Analysis
> data=read.csv("data.csv")

> # Displaying the first few rows of "data" table
> head(data)
    Open   High    Low   Close Contact Open.Int Rtn..1.Day Rtn..1.Day.1
1 1461.0 1472.0 1451.0 1452.75     124     8000                        
2 1442.0 1449.0 1430.0 1438.75      66    10000     -0.96%        0.75%
3 1455.0 1463.1 1444.1 1449.50      66    13600      0.75%       -0.06%
4 1445.0 1455.0 1436.0 1448.70     142    16400     -0.06%        1.91%
5 1456.7 1478.9 1452.0 1476.30     202    21200      1.91%        1.45%
6 1482.0 1508.0 1479.0 1497.65     214    32800      1.45%        1.09%
  Rtn..2.Day       Date Rtn..1.Day.Table   X       X.1      X.2   X.3
1            06/12/2000             From  To Total Rtn  Avg Rtn Count
2      0.69% 06/13/2000             -20% -5%    -0.72% -0.0259%   28 
3      1.85% 06/14/2000              -5% -4%    -9.27% -0.3195%   29 
4      3.38% 06/15/2000              -4% -3%    21.62%  0.3727%   58 
5      2.55% 06/16/2000              -3% -2%     0.69%  0.0042%  164 
6     -0.77% 06/19/2000              -2% -1%     5.34%  0.0110%  486 

> # Calculating 20-day Simple Moving Average(SMA) of the 'Close' column.( Note: SMA can be (5,10,20,40) depending on the type of trader )
> sma20 <- SMA(data[c('Close')],n=20)
> # First 50 values of the array
> head(sma20, n=50)
 [1]       NA       NA       NA       NA       NA       NA       NA       NA
 [9]       NA       NA       NA       NA       NA       NA       NA       NA
[17]       NA       NA       NA 1483.565 1486.398 1490.407 1494.757 1498.482
[25] 1500.263 1499.548 1497.152 1495.045 1491.960 1488.455 1481.505 1476.255
[33] 1468.610 1460.932 1454.182 1446.507 1437.987 1429.075 1419.685 1410.202
[41] 1400.880 1392.607 1383.588 1374.327 1364.628 1356.720 1351.312 1346.303
[49] 1342.935 1341.303


> # Calculating Exponential Moving Average for 14-period length
> ema14 <- EMA(data[c('Close')], n=14)
> head(ema14, n=20)
 [1]       NA       NA       NA       NA       NA       NA       NA       NA
 [9]       NA       NA       NA       NA       NA 1472.343 1473.970 1477.608
[17] 1482.513 1487.872 1491.875 1495.319


> # Calculating Bollinger Bands for a default 20-day period
> bb20 <- BBands(data[c('Close')], sd=2.0)
> head(bb20, n=30)
            dn     mavg       up          pctB
 [1,]       NA       NA       NA            NA
 [2,]       NA       NA       NA            NA
 [3,]       NA       NA       NA            NA
 [4,]       NA       NA       NA            NA
 [5,]       NA       NA       NA            NA
 [6,]       NA       NA       NA            NA
 [7,]       NA       NA       NA            NA
 [8,]       NA       NA       NA            NA
 [9,]       NA       NA       NA            NA
[10,]       NA       NA       NA            NA
[11,]       NA       NA       NA            NA
[12,]       NA       NA       NA            NA
[13,]       NA       NA       NA            NA
[14,]       NA       NA       NA            NA
[15,]       NA       NA       NA            NA
[16,]       NA       NA       NA            NA
[17,]       NA       NA       NA            NA
[18,]       NA       NA       NA            NA
[19,]       NA       NA       NA            NA
[20,] 1432.082 1483.565 1535.048  0.8315153981
[21,] 1435.781 1486.398 1537.014  0.7272241166
[22,] 1442.915 1490.407 1537.900  0.8004927687
[23,] 1447.112 1494.757 1542.403  0.9380525638
[24,] 1454.300 1498.482 1542.665  0.7797177573
[25,] 1456.938 1500.263 1543.587  0.6343048439
[26,] 1455.606 1499.548 1543.489  0.3156920754
[27,] 1451.427 1497.152 1542.878  0.1599008232
[28,] 1443.919 1495.045 1546.171  0.0007946456
[29,] 1433.831 1491.960 1550.089 -0.0187557806
[30,] 1419.807 1488.455 1557.103 -0.0889100923


> # Joining the input data with the calculated Bollinger Bands data
> dataPlusBB <- data.frame(data,bb20)

> # Bollinger Bands PLot

> plot(dataPlusBB$Date,dataPlusBB$Close)

>#Output: check the link
>https://github.com/Krishnadhruv/Stock-Market-Analysis-with-R/blob/master/Bollinger%20Bands_colourless.jpeg

> lines(dataPlusBB$Close, col='red')
> lines(dataPlusBB$up, col='purple')
> lines(dataPlusBB$mavg, col='blue')
> lines(dataPlusBB$dn, col='brown')
> 
> 
>#Output: check the link
>https://github.com/Krishnadhruv/Stock-Market-Analysis-with-R/blob/master/Bollinger%20Bands_colour.jpeg

> # Calculating RSI-Relative Strenth Indicator
> rsi14 <- RSI(data[c('Close')], n= 14)
> head(rsi14, n=30)
 [1]       NA       NA       NA       NA       NA       NA       NA       NA
 [9]       NA       NA       NA       NA       NA       NA 57.81327 61.23884
[17] 63.73590 65.25726 63.59564 63.52307 60.44031 62.68424 66.45044 61.39345
[25] 57.39683 48.76013 44.40029 39.54669 37.10045 32.84026


> # Calculating a standard(12,26,9)MACD indicator
> macd <- MACD(data[c('Close')], nFast=12, nSlow=26, nsig=9, maType=SMA)
> tail(macd, n=10)
             macd    signal
[4181,] 1.1040262 1.0751028
[4182,] 1.0393064 1.0773299
[4183,] 0.9973131 1.0737561
[4184,] 0.9302798 1.0560739
[4185,] 0.8883557 1.0321699
[4186,] 0.8449653 1.0042595
[4187,] 0.7788553 0.9687345
[4188,] 0.8250164 0.9420155
[4189,] 0.8206373 0.9143062
[4190,] 0.8006575 0.8805985


> #Joining all the indicators with the original data
> allData = data.frame(data,sma20,ema14,bb20,rsi14,macd)
> head(allData, n=40)
      Open   High     Low   Close Contact Open.Int Rtn..1.Day Rtn..1.Day.1
1  1461.00 1472.0 1451.00 1452.75     124     8000                        
2  1442.00 1449.0 1430.00 1438.75      66    10000     -0.96%        0.75%
3  1455.00 1463.1 1444.10 1449.50      66    13600      0.75%       -0.06%
4  1445.00 1455.0 1436.00 1448.70     142    16400     -0.06%        1.91%
5  1456.70 1478.9 1452.00 1476.30     202    21200      1.91%        1.45%
6  1482.00 1508.0 1479.00 1497.65     214    32800      1.45%        1.09%
7  1523.00 1523.0 1500.00 1513.95     124    34000      1.09%       -1.84%
8  1518.95 1519.0 1485.00 1486.15     106    34400     -1.84%        0.48%
9  1483.10 1499.0 1474.00 1493.35      80    32400      0.48%       -1.05%
10 1495.00 1499.0 1475.00 1477.70     124    33600     -1.05%       -1.06%
11 1471.00 1472.0 1444.00 1462.00     166    20000     -1.06%       -0.42%
12 1465.00 1467.0 1455.00 1455.90      42    17200     -0.42%        0.95%
13 1456.00 1469.9 1456.00 1469.75      72    16400      0.95%        1.40%
14 1485.00 1499.9 1485.00 1490.35     126    14400      1.40%       -0.39%
15 1487.00 1495.0 1480.00 1484.55     180    34800     -0.39%        1.12%
16 1490.50 1503.0 1490.00 1501.25     158    39600      1.12%        0.88%
17 1502.00 1515.0 1499.50 1514.40     252    62800      0.88%        0.55%
18 1522.00 1527.0 1512.05 1522.70     238    64800      0.55%       -0.32%
19 1510.00 1521.0 1510.00 1517.90     246    59600     -0.32%       -0.01%
20 1520.00 1523.0 1514.75 1517.70      66    60000     -0.01%       -0.55%
21 1524.40 1524.4 1506.50 1509.40     136    53200     -0.55%        0.63%
22 1517.00 1520.5 1508.00 1518.95     126    57600      0.63%        1.16%
23 1513.25 1538.5 1510.50 1536.50     190    70000      1.16%       -0.87%
24 1542.00 1564.0 1520.00 1523.20     422    50800     -0.87%       -0.74%
25 1526.00 1532.0 1508.05 1511.90     518    50000     -0.74%       -1.89%
26 1513.50 1513.5 1482.05 1483.35     450    75600     -1.89%       -1.17%
27 1484.50 1484.8 1465.00 1466.05     368    80400     -1.17%       -1.50%
28 1470.00 1471.5 1443.00 1444.00     188    80800     -1.50%       -0.86%
29 1441.10 1450.0 1425.00 1431.65     324   107200     -0.86%       -1.68%
30 1443.00 1443.0 1401.00 1407.60     226   125600     -1.68%       -6.01%
31 1390.00 1390.0 1318.00 1323.00     160   124400     -6.01%        2.11%
32 1290.00 1364.9 1280.00 1350.90     492    83600      2.11%       -2.52%
33 1358.85 1370.0 1312.00 1316.85     272    68800     -2.52%        1.51%
34 1320.00 1339.0 1301.00 1336.80     532    44400      1.51%        0.95%
35 1350.00 1370.0 1348.00 1349.55     412    96400      0.95%       -0.13%
36 1342.00 1352.0 1340.00 1347.75     356    94800     -0.13%       -0.28%
37 1353.15 1355.0 1340.00 1344.00      72    98000     -0.28%        0.03%
38 1337.00 1347.0 1326.00 1344.45     476   106000      0.03%       -1.07%
39 1340.00 1350.0 1330.00 1330.10     334    92000     -1.07%       -0.15%
40 1333.00 1340.0 1315.00 1328.05     274    93200     -0.15%       -0.38%
   Rtn..2.Day       Date Rtn..1.Day.Table   X       X.1      X.2     X.3
1             06/12/2000             From  To Total Rtn  Avg Rtn   Count
2       0.69% 06/13/2000             -20% -5%    -0.72% -0.0259%     28 
3       1.85% 06/14/2000              -5% -4%    -9.27% -0.3195%     29 
4       3.38% 06/15/2000              -4% -3%    21.62%  0.3727%     58 
5       2.55% 06/16/2000              -3% -2%     0.69%  0.0042%    164 
6      -0.77% 06/19/2000              -2% -1%     5.34%  0.0110%    486 
7      -1.36% 06/20/2000              -1%  0%     0.79%  0.0007%  1,208 
8      -0.57% 06/21/2000               0%  1%    50.92%  0.0384%  1,326 
9      -2.10% 06/22/2000               1%  2%    92.34%  0.1568%    589 
10     -1.48% 06/23/2000               2%  3%    79.51%  0.3917%    203 
11      0.53% 06/26/2000               3%  4%    -1.77% -0.0323%     55 
12      2.37% 06/27/2000               4%  5%     3.89%  0.2592%     15 
13      1.01% 06/28/2000               5% 20%    -7.16% -0.2653%     27 
14      0.73% 06/29/2000                                                
15      2.01% 06/30/2000                                                
16      1.43% 07/03/2000 Rtn +2 Day Table                               
17      0.23% 07/04/2000             From  To Total Rtn  Avg Rtn        
18     -0.33% 07/05/2000             -20% -5%    -9.78% -0.3492%     28 
19     -0.56% 07/06/2000              -5% -4%   -15.93% -0.5494%     29 
20      0.08% 07/07/2000              -4% -3%    52.28%  0.9014%     58 
21      1.80% 07/10/2000              -3% -2%    14.24%  0.0868%    164 
22      0.28% 07/11/2000              -2% -1%    35.65%  0.0733%    486 
23     -1.60% 07/12/2000              -1%  0%   137.51%  0.1138%  1,208 
24     -2.62% 07/13/2000               0%  1%    90.71%  0.0685%  1,325 
25     -3.03% 07/14/2000               1%  2%   105.85%  0.1797%    589 
26     -2.65% 07/17/2000               2%  3%    89.76%  0.4422%    203 
27     -2.35% 07/18/2000               3%  4%   -20.33% -0.3696%     55 
28     -2.52% 07/19/2000               4%  5%    -3.23% -0.2154%     15 
29     -7.59% 07/20/2000               5% 20%    -2.17% -0.0803%     27 
30     -4.03% 07/21/2000                                                
31     -0.46% 07/24/2000                                                
32     -1.04% 07/25/2000                                                
33      2.48% 07/26/2000                                                
34      0.82% 07/27/2000                                                
35     -0.41% 07/28/2000                                                
36     -0.24% 07/31/2000                                                
37     -1.03% 08/01/2000                                                
38     -1.22% 08/02/2000                                                
39     -0.54% 08/03/2000                                                
40      1.92% 08/04/2000                                                
      sma20    ema14       dn     mavg       up          pctB    rsi14
1        NA       NA       NA       NA       NA            NA       NA
2        NA       NA       NA       NA       NA            NA       NA
3        NA       NA       NA       NA       NA            NA       NA
4        NA       NA       NA       NA       NA            NA       NA
5        NA       NA       NA       NA       NA            NA       NA
6        NA       NA       NA       NA       NA            NA       NA
7        NA       NA       NA       NA       NA            NA       NA
8        NA       NA       NA       NA       NA            NA       NA
9        NA       NA       NA       NA       NA            NA       NA
10       NA       NA       NA       NA       NA            NA       NA
11       NA       NA       NA       NA       NA            NA       NA
12       NA       NA       NA       NA       NA            NA       NA
13       NA       NA       NA       NA       NA            NA       NA
14       NA 1472.343       NA       NA       NA            NA       NA
15       NA 1473.970       NA       NA       NA            NA 57.81327
16       NA 1477.608       NA       NA       NA            NA 61.23884
17       NA 1482.513       NA       NA       NA            NA 63.73590
18       NA 1487.872       NA       NA       NA            NA 65.25726
19       NA 1491.875       NA       NA       NA            NA 63.59564
20 1483.565 1495.319 1432.082 1483.565 1535.048  0.8315153981 63.52307
21 1486.398 1497.196 1435.781 1486.398 1537.014  0.7272241166 60.44031
22 1490.407 1500.097 1442.915 1490.407 1537.900  0.8004927687 62.68424
23 1494.757 1504.950 1447.112 1494.757 1542.403  0.9380525638 66.45044
24 1498.482 1507.384 1454.300 1498.482 1542.665  0.7797177573 61.39345
25 1500.263 1507.986 1456.938 1500.263 1543.587  0.6343048439 57.39683
26 1499.548 1504.701 1455.606 1499.548 1543.489  0.3156920754 48.76013
27 1497.152 1499.548 1451.427 1497.152 1542.878  0.1599008232 44.40029
28 1495.045 1492.141 1443.919 1495.045 1546.171  0.0007946456 39.54669
29 1491.960 1484.076 1433.831 1491.960 1550.089 -0.0187557806 37.10045
30 1488.455 1473.879 1419.807 1488.455 1557.103 -0.0889100923 32.84026
31 1481.505 1453.762 1382.235 1481.505 1580.775 -0.2983569059 22.88519
32 1476.255 1440.047 1362.130 1476.255 1590.380 -0.0491987457 30.38046
33 1468.610 1423.621 1334.952 1468.610 1602.268 -0.0677195361 26.93910
34 1460.932 1412.045 1315.988 1460.932 1605.877  0.0717920305 31.81270
35 1454.182 1403.712 1301.879 1454.182 1606.486  0.1564989942 34.80583
36 1446.507 1396.250 1289.081 1446.507 1603.934  0.1863377410 34.57509
37 1437.987 1389.284 1277.761 1437.987 1598.214  0.2067036171 34.06836
38 1429.075 1383.306 1268.859 1429.075 1589.291  0.2359040888 34.19300
39 1419.685 1376.212 1259.380 1419.685 1579.990  0.2205803471 32.10850
40 1410.202 1369.790 1251.785 1410.202 1568.620  0.2407092798 31.81016
            macd     signal
1             NA         NA
2             NA         NA
3             NA         NA
4             NA         NA
5             NA         NA
6             NA         NA
7             NA         NA
8             NA         NA
9             NA         NA
10            NA         NA
11            NA         NA
12            NA         NA
13            NA         NA
14            NA         NA
15            NA         NA
16            NA         NA
17            NA         NA
18            NA         NA
19            NA         NA
20            NA         NA
21            NA         NA
22            NA         NA
23            NA         NA
24            NA         NA
25            NA         NA
26  1.4259812599         NA
27  1.2877922199         NA
28  0.9541611485         NA
29  0.5380339377         NA
30  0.0006027074         NA
31 -0.6969495007         NA
32 -1.2583904629         NA
33 -1.8407796171         NA
34 -2.4924016949 -0.2313278
35 -3.1907539397 -0.7442984
36 -3.8637136367 -1.3166879
37 -4.5281760203 -1.9258365
38 -5.0460763043 -2.5462932
39 -5.4788240078 -3.1551184
40 -5.7413318913 -3.7156053


> # Writing all the contents into the CSV file
> write.table(allData, file="data_with_indicators.csv", na="",sep=",", row.names= FALSE)
> data_with_indicators <- read.csv("data_with_indicators.csv")
> head(data_with_indicators)
    Open   High    Low   Close Contact Open.Int Rtn..1.Day Rtn..1.Day.1
1 1461.0 1472.0 1451.0 1452.75     124     8000                        
2 1442.0 1449.0 1430.0 1438.75      66    10000     -0.96%        0.75%
3 1455.0 1463.1 1444.1 1449.50      66    13600      0.75%       -0.06%
4 1445.0 1455.0 1436.0 1448.70     142    16400     -0.06%        1.91%
5 1456.7 1478.9 1452.0 1476.30     202    21200      1.91%        1.45%
6 1482.0 1508.0 1479.0 1497.65     214    32800      1.45%        1.09%
  Rtn..2.Day       Date Rtn..1.Day.Table   X       X.1      X.2   X.3 sma20
1            06/12/2000             From  To Total Rtn  Avg Rtn Count    NA
2      0.69% 06/13/2000             -20% -5%    -0.72% -0.0259%   28     NA
3      1.85% 06/14/2000              -5% -4%    -9.27% -0.3195%   29     NA
4      3.38% 06/15/2000              -4% -3%    21.62%  0.3727%   58     NA
5      2.55% 06/16/2000              -3% -2%     0.69%  0.0042%  164     NA
6     -0.77% 06/19/2000              -2% -1%     5.34%  0.0110%  486     NA
  ema14 dn mavg up pctB rsi14 macd signal
1    NA NA   NA NA   NA    NA   NA     NA
2    NA NA   NA NA   NA    NA   NA     NA
3    NA NA   NA NA   NA    NA   NA     NA
4    NA NA   NA NA   NA    NA   NA     NA
5    NA NA   NA NA   NA    NA   NA     NA
6    NA NA   NA NA   NA    NA   NA     NA
> 
